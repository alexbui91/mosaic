"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{89:function(e,t,n){n.d(t,{Z:function(){return NewPost}});var s=n(2253),a=n(4932),i=n(1309),o=n(5893),c=n(7294),l=n(1664),r=n.n(l),d=n(7066),m=n(7904);function NewPost(e){var t=e.style,n=e.attachments,l=e.preview,u=e.callback,h=(0,i._)((0,c.useState)("en"),2),f=h[0],p=h[1],x=(0,i._)((0,c.useState)({}),2),j=x[0],v=x[1],N=(0,i._)((0,c.useState)({user_id:null,content:"",access_control:1,attachments:""}),2),g=N[0],_=N[1],uploadPost=function(){var e="";n&&(e=(0,m.Nj)(n));var t=localStorage.getItem("backend_url"),i=(0,s._)({},g);i.user_id=j.uid,i.attachments=e,i.content&&i.user_id&&(0,d.Z)({method:"POST",url:t+"/api/post",data:i}).then(function(e){e.data.message&&(_((0,a._)((0,s._)({},g),{user_id:j.uid,content:"",attachments:""})),u())}).catch(function(e){console.log(e),alert("An error occurred while posting, please try again later!")})};return(0,c.useEffect)(function(){p((0,m.G3)()),v((0,m.PR)())},[]),(0,o.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[(0,o.jsx)("div",{className:"author-thumb",children:j?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("img",{className:"author-item author-avatar",loading:"lazy",src:j.avatar?j.avatar:"img/dalle_avatar.png",width:"36",height:"36",alt:"author"}),"popup"==t?(0,o.jsx)("h3",{className:"author-item author-name",children:j.fullname}):(0,o.jsx)(o.Fragment,{})]}):(0,o.jsx)(o.Fragment,{})}),(0,o.jsx)("div",{className:"form-group with-icon label-floating is-empty",children:(0,o.jsx)("textarea",{className:"form-control",placeholder:(0,m.id)(f,"what's_on_your_mind?"),value:g.content,onChange:function(e){_((0,a._)((0,s._)({},g),{content:e.target.value}))}})}),(0,o.jsx)("div",{className:"post-attachment",children:l&&l.length?(0,o.jsxs)("div",{className:"post-video",children:[(0,o.jsxs)("div",{className:"video-thumb",children:[(0,o.jsx)("img",{loading:"lazy",src:"perf"==l[0].type?"img/dalle_thumbnail2.png":"img/article_thumbnail.png",alt:"photo",width:"100",height:"100"}),(0,o.jsx)(r(),{href:l[0].link,className:"play-video",children:(0,o.jsx)("svg",{className:"olymp-play-icon",children:(0,o.jsx)("use",{xlinkHref:"perf"==l[0].type?"#olymp-play-icon":"#olymp-blog-icon"})})})]}),(0,o.jsxs)("div",{className:"video-content",children:[(0,o.jsx)(r(),{className:"h4 title",href:l[0].link,children:l[0].title?l[0].title:"Click to see detail"}),(0,o.jsx)(r(),{className:"link-site",href:"/community",children:"MOSAIC"})]})]}):(0,o.jsx)(o.Fragment,{})}),t&&""!=t?(0,o.jsx)("button",{className:"btn btn-blue btn-lg full-width",onClick:uploadPost,children:(0,m.id)(f,"share")}):(0,o.jsx)("div",{className:"add-options-message",children:(0,o.jsx)("button",{className:"btn btn-primary btn-md-2",onClick:uploadPost,children:(0,m.id)(f,"post_status")})})]})}},9427:function(e,t,n){n.d(t,{Z:function(){return PostComment}});var s=n(1309),a=n(5893),i=n(7294),o=n(7066),c=n(7904);function PostComment(e){var t=e.user,n=e.pid,l=e.aid,r=e.type,d=e.onNewComment,m=(0,s._)((0,i.useState)(""),2),u=m[0],h=m[1];return(0,a.jsx)("form",{className:"comment-form inline-items",onSubmit:function(e){e.preventDefault()},children:(0,a.jsxs)("div",{className:"comment-form-container post__author author vcard inline-items",children:["performance"!=r?(0,a.jsx)(a.Fragment,{children:t&&t.avatar?(0,a.jsx)("img",{loading:"lazy",src:t.avatar,alt:"author",width:"36",height:"36"}):(0,a.jsx)("img",{loading:"lazy",src:"img/dalle_avatar.png",alt:"author",width:"36",height:"36"})}):(0,a.jsx)(a.Fragment,{}),(0,a.jsxs)("div",{className:"comment-form-item form-group is-empty",children:[(0,a.jsx)("textarea",{name:"comment",value:u,className:"comment-form-area form-control",placeholder:"Write a comment...",onChange:function(e){h(e.target.value)}}),(0,a.jsx)("span",{className:"material-input"})]}),(0,a.jsx)("button",{className:"comment-form-item btn btn-md-2 btn-primary",onClick:function(){var e=(0,c.LH)(),s="",a=null;r&&"performance"==r?(s=e+"/api/text_comment",a={annotation_id:l,content:u}):(s=e+"/api/comment_post",a={pid:n,user_id:t.uid,content:u}),(0,o.Z)({method:"POST",url:s,data:a}).then(function(e){h(""),d&&d(u)}).catch(function(e){console.log(e)})},children:"Post Comment"})]})})}},9308:function(e,t,n){n.d(t,{Z:function(){return PostPopup}});var s=n(1309),a=n(5893),i=n(7066),o=n(89),c=n(7904),l=n(7294);function PostPopup(e){var t=e.isShow,n=e.attachments,r=e.closePopup,d=e.onNewPost,m=(0,s._)((0,l.useState)("en"),2),u=m[0],h=m[1],f=(0,s._)((0,l.useState)({}),2),p=f[0],x=f[1],load_preview=function(){if(n&&n.length){var e=(0,c.LH)();(0,i.Z)({method:"POST",url:e+"/api/load_preview",data:{attachments:(0,c.Nj)(n)}}).then(function(e){x(e.data.attachments)}).catch(function(e){console.log(e)})}};return(0,l.useEffect)(function(){t&&(h((0,c.G3)()),load_preview())},[t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"modal fade post-popup "+(t?"show":""),children:(0,a.jsx)("div",{className:"modal-dialog window-popup create-friend-group create-friend-group-add-friends",children:(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsx)("a",{className:"close icon-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:r,children:(0,a.jsx)("svg",{className:"olymp-close-icon",children:(0,a.jsx)("use",{xlinkHref:"#olymp-close-icon"})})}),(0,a.jsx)("div",{className:"modal-header",children:(0,a.jsx)("h6",{className:"title",children:(0,c.id)(u,"write_post")})}),(0,a.jsx)("div",{className:"modal-body",children:(0,a.jsx)(o.Z,{style:"popup",attachments:n,preview:p,callback:function(){r(),d()}})})]})})}),(0,a.jsx)("div",{className:"modal-backdrop fade "+(t?"show":"")})]})}},8345:function(e,t,n){n.d(t,{Z:function(){return ListPostComment}});var s=n(1309),a=n(4586),i=n(5893),o=n(7066),c=n(7904),l=n(8878),r=n(7294);function ListPostComment(e){var t=e.pid,n=e.userId,d=e.type,m=e.needCommentRefresh,u=e.setNeedCommentRefresh,h=(0,s._)((0,r.useState)("en"),2),f=h[0],p=h[1],x=(0,s._)((0,r.useState)([]),2),j=x[0],v=x[1],N=(0,s._)((0,r.useState)({}),2),g=N[0],_=N[1],load_comments=function(){var e=(0,c.LH)(),s="",a=null;d&&"performance"==d?(s=e+"/api/list_text_comment",a={annotation_id:t,user_id:n}):(s=e+"/api/list_post_comment",a={pid:t}),(0,o.Z)({method:"POST",url:s,data:a}).then(function(e){var t=e.data;t.comments&&v(t.comments)}).catch(function(e){console.log(e)})},deleteComment=function(e){var t=e.cid;(0,l.$s)(t,d,function(){v(j.filter(function(e){return e.cid!==t}))})},react=function(e,t,n){var s=t.feedback;if(s&&s.feedback==n)(0,l.yz)(s.fid,function(t){if(t.message){var n=(0,a._)(j);n[e].feedback=null,v(n)}});else{var i={text_comment_id:t.cid,user_feedback_id:g.uid,feedback:n};(0,l.NC)(i,function(t){var s=t.fid;if(s){var i=(0,a._)(j);i[e].feedback={fid:s,feedback:n},v(i)}})}};return(0,r.useEffect)(function(){p((0,c.G3)()),_((0,c.PR)()),load_comments()},[]),(0,r.useEffect)(function(){m&&(load_comments(),u(!1))},[m]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("ul",{className:"comments-list",children:j.map(function(e,t){return(0,i.jsxs)("li",{className:"comment-item "+("performance"==d?"performance-comment-item":""),children:[(0,i.jsxs)("div",{className:"post__author author vcard inline-items",children:[d&&"performance"==d?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)("img",{loading:"lazy",src:e.avatar,width:"36",height:"36",alt:"author"}),(0,i.jsxs)("div",{className:"author-date",children:[(0,i.jsx)("a",{className:"h6 post__author-name fn",href:"/profile?uid="+e.user_id,children:e.fullname}),(0,i.jsx)("div",{className:"post__date",children:(0,i.jsx)("time",{className:"published",dateTime:e.updated_at,children:e.updated_at})})]}),(0,i.jsxs)("div",{className:"more",children:[(0,i.jsx)("svg",{className:"olymp-three-dots-icon",children:(0,i.jsx)("use",{xlinkHref:"#olymp-three-dots-icon"})}),g.uid==e.user_id?(0,i.jsx)("ul",{className:"more-dropdown",children:(0,i.jsx)("li",{children:(0,i.jsxs)("a",{onClick:function(){return deleteComment(e)},children:[(0,i.jsx)("i",{className:"fa fa-trash"}),"\xa0",(0,c.id)(f,"delete_comment")]})})}):(0,i.jsx)(i.Fragment,{})]})]}),(0,i.jsx)("p",{children:e.content}),"performance"==d&&"student"==g.user_type&&(0,i.jsx)("div",{className:"reaction-info post-additional-info inline-items",children:(0,i.jsxs)("div",{className:"reaction-button-area",children:[(0,i.jsx)("button",{className:"reaction-button inline-items "+(e.feedback&&1==e.feedback.feedback?"reaction-active":""),onClick:function(){return react(t,e,1)},children:(0,i.jsx)("i",{className:"far fa-thumbs-up"})}),(0,i.jsx)("button",{className:"reaction-button inline-items "+(e.feedback&&0==e.feedback.feedback?"reaction-active":""),onClick:function(){return react(t,e,0)},children:(0,i.jsx)("i",{className:"far fa-thumbs-down"})})]})})]},e.cid)})}),(0,i.jsxs)("a",{className:"more-comments",onClick:function(){},children:[(0,c.id)(f,"view_more_comments")," ",(0,i.jsx)("span",{children:"+"})]})]})}},6823:function(e,t,n){n.d(t,{Z:function(){return ListPosts}});var s=n(2253),a=n(4932),i=n(1309),o=n(5893),c=n(7066),l=n(7294),r=n(1664),d=n.n(r);function PostPreview(e){var t=e.attachments;return(0,o.jsx)(o.Fragment,{children:t&&t.length?(0,o.jsxs)("div",{className:"post-video",children:[(0,o.jsxs)("div",{className:"video-thumb",children:[(0,o.jsx)("img",{loading:"lazy",src:"perf"==t[0].type?"img/dalle_thumbnail2.png":"img/article_thumbnail.png",alt:"photo",width:"197",height:"194"}),(0,o.jsx)(d(),{href:t[0].link,className:"play-video",children:(0,o.jsx)("svg",{className:"olymp-play-icon",children:(0,o.jsx)("use",{xlinkHref:"perf"==t[0].type?"#olymp-play-icon":"#olymp-blog-icon"})})})]}),(0,o.jsxs)("div",{className:"video-content",children:[(0,o.jsx)(d(),{className:"h4 title",href:t[0].link,children:t[0].title?t[0].title:"Click to see detail"}),(0,o.jsx)(d(),{className:"link-site",href:"/community",children:"MOSAIC"})]})]}):(0,o.jsx)(o.Fragment,{})})}function CommentSummary(e){var t=e.isLike,n=e.onLike,s=e.onComment,a=e.onShare;return(0,o.jsxs)("div",{className:"post-additional-info inline-items",children:[(0,o.jsx)("a",{className:"post-add-icon inline-items "+(t?"active":""),onClick:n,children:(0,o.jsx)("svg",{className:"olymp-heart-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-heart-icon"})})}),(0,o.jsxs)("div",{className:"comments-shared",children:[(0,o.jsx)("a",{className:"post-add-icon inline-items",onClick:s,children:(0,o.jsx)("svg",{className:"olymp-speech-balloon-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-speech-balloon-icon"})})}),(0,o.jsx)("a",{className:"post-add-icon inline-items",onClick:a,children:(0,o.jsx)("svg",{className:"olymp-share-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-share-icon"})})})]})]})}var m=n(9427);function PostAction(e){var t=e.isLike,n=e.onLike,s=e.onComment,a=e.onShare;return(0,o.jsxs)("div",{className:"control-block-button post-control-button",children:[(0,o.jsxs)("a",{className:"btn btn-control "+(t?"active":""),onClick:n,children:[(0,o.jsx)("svg",{className:"olymp-like-post-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-like-post-icon"})}),(0,o.jsx)("div",{className:"ripple-container"})]}),(0,o.jsx)("a",{className:"btn btn-control",onClick:s,children:(0,o.jsx)("svg",{className:"olymp-comments-post-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-comments-post-icon"})})}),(0,o.jsx)("a",{className:"btn btn-control",onClick:a,children:(0,o.jsx)("svg",{className:"olymp-share-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-share-icon"})})})]})}var u=n(8345),h=n(7904),f=n(8878);function ListPosts(e){var t=e.userId,n=e.post_type,r=e.shareCallback,p=e.needPostRefresh,x=e.setNeedPostRefresh,j=(0,i._)((0,l.useState)("en"),2),v=j[0],N=j[1],g=(0,i._)((0,l.useState)([]),2),_=g[0],b=g[1],k=(0,i._)((0,l.useState)(-1),2),y=k[0],C=k[1],P=(0,i._)((0,l.useState)(-1),2),w=P[0],S=P[1],F=(0,i._)((0,l.useState)(null),2),H=F[0],Z=F[1],L=(0,i._)((0,l.useState)(!1),2),R=L[0],z=L[1],load_posts=function(e){var callback=function(e){b(e),e.length&&C(e[0].pid)};t?(0,f.Pu)(t,e,callback):(0,f.uF)(e,callback)},deletePost=function(e){var t=(0,h.LH)();(0,c.Z)({method:"POST",url:t+"/api/delete_post",data:{post_id:e}}).then(function(e){console.log("response data"+e.data.message),e.data.message&&x(!0)}).catch(function(e){console.log(e)})},likeAction=function(e,t,n){e.is_like?(0,f.Pj)(t,n,function(){b(_.map(function(e){return e.pid===n?(0,a._)((0,s._)({},e),{is_like:!1}):e}))}):(0,f.mf)(t,n,function(){b(_.map(function(e){return e.pid===n?(0,a._)((0,s._)({},e),{is_like:!0}):e}))})},openComment=function(e){C(e)},sharePost=function(e){r([(0,h.qn)(e)])};return(0,l.useEffect)(function(){N((0,h.G3)());var e=(0,h.PR)();Z(e),("user_post"==n&&t||"community"==n)&&load_posts(e.uid)},[t]),(0,l.useEffect)(function(){p&&(load_posts((0,h.PR)().uid),x(!1))},[p]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{id:"newsfeed-items-grid",children:_.map(function(e){return(0,o.jsxs)("div",{className:"ui-block",children:[(0,o.jsxs)("article",{className:"hentry post video",children:[(0,o.jsxs)("div",{className:"post__author author vcard inline-items",children:[e.avatar?(0,o.jsx)("img",{loading:"lazy",src:e.avatar,alt:"author",width:"42",height:"42"}):(0,o.jsx)("img",{loading:"lazy",src:"img/dalle_avatar.png",alt:"author",width:"42",height:"42"}),(0,o.jsxs)("div",{className:"author-date",children:[(0,o.jsx)(d(),{href:"/profile?uid="+e.user_id,className:"h6 post__author-name fn",children:e.fullname})," ",(0,h.id)(v,"share_a")," ",(0,o.jsx)("a",{children:(0,h.id)(v,"link")}),(0,o.jsx)("div",{className:"post__date",children:(0,o.jsx)("time",{className:"published",dateTime:e.updated_at,children:e.updated_at})})]}),(0,o.jsxs)("div",{className:"more",children:[(0,o.jsx)("svg",{className:"olymp-three-dots-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-three-dots-icon"})}),H.uid==e.user_id?(0,o.jsx)("ul",{className:"more-dropdown",children:(0,o.jsx)("li",{children:(0,o.jsxs)("a",{onClick:function(){return deletePost(e.pid)},children:[(0,o.jsx)("i",{className:"fa fa-trash"}),"\xa0",(0,h.id)(v,"delete_post")]})})}):(0,o.jsx)(o.Fragment,{})]})]}),(0,o.jsx)("p",{children:e.content}),(0,o.jsx)(PostPreview,{attachments:e.attachments}),(0,o.jsx)(PostAction,{isLike:e.is_like,onLike:function(){likeAction(e,H.uid,e.pid)},onComment:function(){openComment(e.pid)},onShare:function(){sharePost(e.pid)}}),(0,o.jsx)(CommentSummary,{isLike:e.is_like,onLike:function(){likeAction(e,H.uid,e.pid)},onComment:function(){openComment(e.pid)},onShare:function(){sharePost(e.pid)}})]}),e.pid==w?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(u.Z,{pid:e.pid,needCommentRefresh:R,setNeedCommentRefresh:z})}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("a",{className:"more-comments",onClick:function(){S(e.pid)},children:(0,h.id)(v,"view_comments")})}),e.pid==y?(0,o.jsx)(m.Z,{user:H,pid:e.pid,onNewComment:function(){z(!0)}}):(0,o.jsx)(o.Fragment,{})]},e.pid)})}),(0,o.jsx)("a",{id:"load-more-button",className:"btn btn-control btn-more","data-load-link":"items-to-load.html","data-container":"newsfeed-items-grid",children:(0,o.jsx)("svg",{className:"olymp-three-dots-icon",children:(0,o.jsx)("use",{xlinkHref:"#olymp-three-dots-icon"})})})]})}},816:function(e,t,n){n.d(t,{Z:function(){return PostPerformance}});var s=n(1309),a=n(5893),i=n(7294),o=n(89),c=n(7904);function PostPerformance(e){var t=e.onNewPost,n=(0,s._)((0,i.useState)("en"),2),l=n[0],r=n[1],d=(0,s._)((0,i.useState)("status"),2),m=d[0],u=d[1];return(0,i.useEffect)(function(){r((0,c.G3)())},[]),(0,a.jsx)("div",{className:"ui-block",children:(0,a.jsxs)("div",{className:"news-feed-form",children:[(0,a.jsx)("ul",{className:"nav nav-tabs",role:"tablist",children:(0,a.jsx)("li",{className:"nav-item",children:(0,a.jsxs)("a",{className:"nav-link inline-items "+("status"==m?"active":""),"data-bs-toggle":"tab",role:"tab",onClick:function(){u("status")},children:[(0,a.jsx)("svg",{className:"olymp-status-icon",children:(0,a.jsx)("use",{xlinkHref:"#olymp-status-icon"})}),(0,a.jsx)("span",{children:(0,c.id)(l,"status")})]})})}),(0,a.jsx)("div",{className:"tab-content",children:(0,a.jsx)("div",{className:"tab-pane fade "+("status"==m?"active show":""),id:"home-1",role:"tabpanel","aria-expanded":"true",children:(0,a.jsx)(o.Z,{callback:function(){alert("Post Success!"),t()}})})})]})})}},4766:function(e,t,n){n.d(t,{Z:function(){return RecentPerformance}});var s=n(1309),a=n(5893),i=n(7294),o=n(1163),c=n(7904),l=n(8878),r=n(1664),d=n.n(r);function RecentPerformance(e){var t=e.title,n=e.userId,r=e.shareCallback,m=(0,o.useRouter)(),u=(0,s._)((0,i.useState)("en"),2),h=u[0],f=u[1],p=(0,s._)((0,i.useState)([]),2),x=p[0],j=p[1],share=function(e){r([(0,c.WY)(e.pid)])},annotate=function(e){var t=e.pid;m.push("/annotation?pid=".concat(t))};return(0,i.useEffect)(function(){f((0,c.G3)()),(0,l.EZ)(n,10,1,j)},[]),(0,a.jsxs)("div",{className:"ui-block",children:[(0,a.jsxs)("div",{className:"ui-block-title",children:[t?(0,a.jsx)("h6",{className:"title",children:t}):(0,a.jsx)(d(),{className:"h6",href:n?"/performances?uid="+n:"/performances?mode=all",children:n?(0,c.id)(h,"recent_performances"):(0,c.id)(h,"all_recent_performances")}),(0,a.jsx)("a",{className:"more",children:(0,a.jsx)("svg",{className:"olymp-three-dots-icon",children:(0,a.jsx)("use",{xlinkHref:"#olymp-three-dots-icon"})})})]}),(0,a.jsxs)("ul",{className:"widget w-friend-pages-added notification-list friend-requests performance-list",children:[x.map(function(e,t){return(0,a.jsxs)("li",{className:"inline-items",children:[(!n||-1==n)&&(0,a.jsx)("div",{className:"author-thumb",children:(0,a.jsx)(d(),{href:"/profile?uid="+e.user_id,children:e.avatar?(0,a.jsx)("img",{loading:"lazy",src:e.avatar,alt:"photo",width:"36",height:"36"}):(0,a.jsx)("img",{loading:"lazy",src:"img/avatar1.webp",alt:"photo",width:"36",height:"36"})})}),(0,a.jsxs)("div",{className:"notification-event",children:[(0,a.jsx)("a",{className:"h6 notification-friend",onClick:function(){annotate(e)},children:e.name}),(0,a.jsx)("span",{className:"chat-message-item",children:e.updated_at})]}),(0,a.jsx)("span",{className:"notification-icon","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":"ADD TO YOUR FAVS",children:(0,a.jsx)("button",{className:"btn btn-outline-dark notification-action",onClick:function(){share(e)},children:(0,a.jsx)("i",{className:"fa fa-share"})})})]},e.pid)}),0==x.length?(0,a.jsx)("li",{className:"inline-items",children:(0,c.id)(h,"no_information")}):(0,a.jsx)(a.Fragment,{})]})]})}}}]);