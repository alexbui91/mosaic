(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[881],{7032:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-class",function(){return l(6602)}])},6602:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return MyClass}});var a=l(1309),c=l(5893),i=l(7294),n=l(1664),t=l.n(n),o=l(8878),r=l(7904),d=l(2253),m=l(4932),u=l(9755),f=l.n(u),h=l(7484),x=l.n(h),p=l(586),j=l(720),N=l(7389);function CreateClassPopup(e){var s=e.isShow,l=e.closePopup,n=e.user_id,t=e.classInfo,u=e.callback,h=(0,a._)((0,i.useState)("en"),2),_=h[0],g=h[1],v=(0,a._)((0,i.useState)({name:"",description:"",status:"1",start_time:"",end_time:""}),2),b=v[0],C=v[1],initDom=function(){f()(".form-control").on("focus",function(e){f()(f()(e.target).parent()).toggleClass("is-focused")}),f()(".form-control").on("blur",function(e){f()(f()(e.target).parent()).toggleClass("is-focused")})},changeDate=function(e,s){"fromDate"==s?C((0,m._)((0,d._)({},b),{start_time:e})):C((0,m._)((0,d._)({},b),{end_time:e}))};return(0,i.useEffect)(function(){g((0,r.G3)()),initDom()},[]),(0,i.useEffect)(function(){t&&C(function(e){return(0,m._)((0,d._)({},e),{name:t.name,description:t.description,status:t.status,start_time:t.start_time,end_time:t.end_time})})},[t]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"modal fade post-popup "+(s?"show":""),id:"create-friend-group-add-friends",role:"dialog","aria-labelledby":"create-friend-group-add-friends","aria-hidden":"true",children:(0,c.jsx)("div",{className:"modal-dialog window-popup create-friend-group create-friend-group-add-friends",role:"document",children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsx)("a",{className:"close icon-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:l,children:(0,c.jsx)("svg",{className:"olymp-close-icon",children:(0,c.jsx)("use",{xlinkHref:"#olymp-close-icon"})})}),(0,c.jsx)("div",{className:"modal-header",children:null==t?(0,c.jsx)("h6",{className:"title",children:(0,r.id)(_,"create_a_new_class")}):(0,c.jsxs)("h6",{className:"title",children:[(0,r.id)(_,"update_class_infor")," - ",t.name]})}),(0,c.jsx)("div",{className:"modal-body",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:(0,c.jsxs)("div",{className:"form-group label-floating "+(b.name?"":"is-empty "),children:[(0,c.jsx)("label",{className:"control-label",children:"Name"}),(0,c.jsx)("input",{className:"form-control",type:"text",placeholder:"",value:b.name,onChange:function(e){C((0,m._)((0,d._)({},b),{name:e.target.value}))}}),(0,c.jsx)("span",{className:"material-input"})]})}),(0,c.jsx)("div",{className:"col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:(0,c.jsxs)("div",{className:"form-group label-floating "+(b.name?"":"is-empty "),children:[(0,c.jsx)("label",{className:"control-label",children:(0,r.id)(_,"description")}),(0,c.jsx)("textarea",{className:"full-width class-description",type:"text",placeholder:"",value:b.description,onChange:function(e){C((0,m._)((0,d._)({},b),{description:e.target.value}))}}),(0,c.jsx)("span",{className:"material-input"})]})}),(0,c.jsxs)("div",{className:"col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:[(0,c.jsx)("label",{className:"control-label",children:(0,r.id)(_,"status")}),(0,c.jsx)("fieldset",{className:"form-group",children:(0,c.jsxs)("select",{className:"form-select",value:b.status,onChange:function(e){C((0,m._)((0,d._)({},b),{status:e.target.value}))},children:[(0,c.jsx)("option",{value:"1",children:(0,r.id)(_,"open")}),(0,c.jsx)("option",{value:"0",children:(0,r.id)(_,"close")})]})})]}),(0,c.jsx)("div",{className:"col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12",children:(0,c.jsxs)("div",{className:"form-group date-time-picker label-floating",children:[(0,c.jsx)("label",{className:"control-label",children:(0,r.id)(_,"start")}),(0,c.jsx)(j._,{dateAdapter:p.y,children:(0,c.jsx)(N.M,{value:x()(b.start_time),onChange:function(e){e&&changeDate(e.format("YYYY-MM-DD"),"fromDate")}})})]})}),(0,c.jsx)("div",{className:"col col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12",children:(0,c.jsxs)("div",{className:"form-group date-time-picker label-floating",children:[(0,c.jsx)("label",{className:"control-label",children:(0,r.id)(_,"end")}),(0,c.jsx)(j._,{dateAdapter:p.y,children:(0,c.jsx)(N.M,{value:x()(b.end_time),onChange:function(e){e&&changeDate(e.format("YYYY-MM-DD"),"toDate")}})})]})})]})}),(0,c.jsx)("div",{className:"col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:(0,c.jsx)("button",{className:"btn btn-primary full-width",onClick:function(){var e=(0,d._)({},b);t?(e.cid=t.cid,(0,o.a7)(e,u)):(e.created_user_id=n,(0,o.qH)(e,u))},children:t?"Update":(0,r.id)(_,"create")})})]})})]})})}),(0,c.jsx)("div",{className:"modal-backdrop fade "+(s?"show":"")})]})}var _=l(4827),g=l(6366),v=l(6895);function MyClass(){var e=(0,a._)((0,i.useState)({}),2),s=e[0],l=e[1],n=(0,a._)((0,i.useState)([]),2),d=n[0],m=n[1],u=(0,a._)((0,i.useState)(!1),2),f=u[0],h=u[1],x=(0,a._)((0,i.useState)(null),2),p=x[0],j=x[1],N=["#6495ED","#2E8B57","#8A2BE2","#4682B4","#32CD32","#008080","#DC143C","#9932CC","#1E90FF","#FF4500","#FF69B4","#6A5ACD","#FF8C00","#00CED1","#8B008B","#008B8B","#FFD700","#B22222","#4B0082","#FF6347"],closePopup=function(){h(!1),j(null)},edit=function(e){h(!0),j(e)},remove=function(e){window.confirm("Are you sure to remove this class?")&&(0,o.ZB)(e.cid,function(s){s.message&&m(d.filter(function(s){return s.cid!=e.cid}))})};return(0,i.useEffect)(function(){var e=(0,r.PR)();l(e),"teacher"==e.user_type?(0,o.yP)(e.uid,m):(0,o.cp)(e.uid,m)},[]),(0,c.jsxs)("div",{className:"my_class",children:[(0,c.jsx)(_.Z,{}),(0,c.jsx)("div",{className:"header-spacer"}),(0,c.jsx)("div",{className:"container min-height-600",children:(0,c.jsxs)("div",{className:"row",children:["teacher"==s.user_type&&(0,c.jsx)("div",{className:"col col-xl-3 col-lg-6 col-md-6 col-sm-6 col-12",children:(0,c.jsx)("div",{className:"friend-item friend-groups class-groups create-group h-75 mb-3",children:(0,c.jsx)("div",{className:"content",onClick:function(){h(!0)},children:(0,c.jsx)("a",{href:"#",className:"  btn btn-control bg-blue","data-bs-toggle":"modal","data-bs-target":"#create-friend-group-1",children:(0,c.jsx)("svg",{className:"olymp-plus-icon",children:(0,c.jsx)("use",{xlinkHref:"#olymp-plus-icon"})})})})})}),d.map(function(e,l){return(0,c.jsx)("div",{className:"col col-xl-3 col-lg-6 col-md-6 col-sm-6 col-12 mb-3",children:(0,c.jsx)("div",{className:"ui-block h-100 mb-0",children:(0,c.jsxs)("div",{className:"class-item",children:[e.created_user_id==s.uid&&(0,c.jsx)("button",{className:"btn btn-primary edit",onClick:function(){edit(e)},children:(0,c.jsx)("i",{className:"far fa-edit"})}),(0,c.jsx)("div",{className:"class-item-thumb",style:{backgroundColor:N[(0,r.xT)(0,N.length-1)]}}),(0,c.jsxs)("div",{className:"class-item-name flex",children:[(0,c.jsx)("div",{className:"item-flex",children:(0,c.jsx)(t(),{className:"h5",href:"teacher"==s.user_type?"/class?cid="+e.cid:"/student-class?cid="+e.cid,children:e.name})}),e.created_user_id==s.uid&&(0,c.jsx)("button",{className:"item-flex btn btn-outline-dark",onClick:function(){remove(e)},children:(0,c.jsx)("i",{className:"far fa-trash"})})]})]})})},e.cid)})]})}),"teacher"==s.user_type&&(0,c.jsx)(CreateClassPopup,{isShow:f,closePopup:closePopup,classInfo:p,user_id:s.uid,callback:function(e){e.message?(alert("Create successfully!"),(0,o.yP)(s.uid,m),closePopup()):alert("An error may occur, please try again later!")}}),(0,c.jsx)(g.Z,{menuId:"my-class"}),(0,c.jsx)(v.Z,{pageNum:2})]})}}},function(e){e.O(0,[571,424,349,389,980,774,888,179],function(){return e(e.s=7032)}),_N_E=e.O()}]);