"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{517:function(e,s,n){n.d(s,{Z:function(){return CreateAssignmentPopup}});var a=n(2253),l=n(4932),i=n(1309),t=n(5893),o=n(7294),c=n(9755),d=n.n(c),r=n(720),m=n(586),u=n(8882),f=n(8878),h=n(7904);function SearchSongPopup(e){var s=e.isShow,n=e.closePopup,a=e.callback,l=(0,i._)((0,o.useState)("en"),2),c=l[0],d=l[1],r=(0,i._)((0,o.useState)(""),2),m=r[0],u=r[1],x=(0,i._)((0,o.useState)([]),2),p=x[0],g=x[1],v=(0,i._)((0,o.useState)(!1),2),j=v[0],w=v[1],selectSong=function(e){a(e),u(e.name),w(!1),n()};return(0,o.useEffect)(function(){d((0,h.G3)())},[]),(0,t.jsx)("div",{className:"modal fade search-popup "+(s?"show":""),children:(0,t.jsx)("div",{className:"modal-dialog window-popup create-friend-group create-friend-group-add-friends",role:"document",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsx)("a",{className:"close icon-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:n,children:(0,t.jsx)("svg",{className:"olymp-close-icon",children:(0,t.jsx)("use",{xlinkHref:"#olymp-close-icon"})})}),(0,t.jsxs)("div",{className:"modal-body search-popup-body",children:[(0,t.jsxs)("div",{className:"form-group with-icon label-floating search-input-container "+(m?"":"is-empty "),children:[(0,t.jsxs)("label",{className:"control-label",children:[(0,h.id)(c,"search_song_by_name"),"..."]}),(0,t.jsx)("input",{className:"form-control",type:"text",value:m,onChange:function(e){u(e.target.value);var s=e.target.value;if(!s||" "==s[s.length-1]){w(!1);return}w(!0),(0,f.Md)(m,g)}}),(0,t.jsx)("svg",{className:"olymp-magnifying-glass-icon",children:(0,t.jsx)("use",{xlinkHref:"#olymp-magnifying-glass-icon"})})]}),(0,t.jsx)("div",{className:"songname-example  "+(""==m?"show":" "),children:"E.g. Piano Sonata in B-flat Major, D.960 (movement 1)"}),(0,t.jsx)("div",{className:"form-group search_result_container "+(j?"show":""),children:(0,t.jsxs)("div",{className:"search_result_wrapper",children:[(0,t.jsx)("p",{className:"search_result_empty "+(0==p.length?"show":""),children:(0,h.id)(c,"no_information")}),(0,t.jsx)("ul",{className:"search_result_list flex flex-col "+(0!=p.length?"show":""),children:p.map(function(e,s){return(0,t.jsxs)("li",{className:"search_result_item flex flex-row",onClick:function(){selectSong(e)},children:[(0,t.jsx)("div",{className:"flex search_result_img",children:(0,t.jsx)("img",{src:"/img/song_icon.png",className:""})}),(0,t.jsxs)("div",{className:"flex flex-col search_result_item_content",children:[(0,t.jsx)("h3",{className:"search_result_item_title font-bold",children:e.name}),(0,t.jsxs)("p",{className:"description",children:[(0,h.id)(c,"composer"),": ",e.composer_name]}),(0,t.jsxs)("p",{className:"description",children:[(0,h.id)(c,"description"),": ",e.description]})]})]},e.sid)})})]})})]})]})})})}var x=n(9730);function StudentSelectionPopup(e){var s=e.isShow,n=e.closePopup,a=e.classId,l=e.callback;return(0,t.jsx)("div",{className:"modal fade student-popup-container "+(s?"show":""),children:(0,t.jsx)("div",{className:"modal-dialog window-popup",role:"document",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsx)("a",{className:"close icon-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:n,children:(0,t.jsx)("svg",{className:"olymp-close-icon",children:(0,t.jsx)("use",{xlinkHref:"#olymp-close-icon"})})}),(0,t.jsx)("div",{className:"modal-body",children:(0,t.jsx)(x.Z,{classId:a,type:"popup",onFinish:function(e){l(e),n()}})})]})})})}var p=n(7484),g=n.n(p);function ViewMusic(e){var s=e.data,a=e.measures,l=e.isShow,c=e.closePopup,d=(e.type,e.editable),r=e.onFinish,m=(0,i._)((0,o.useState)("en"),2),u=m[0],f=m[1],x=(0,i._)((0,o.useState)(!1),2),p=x[0],g=x[1],v=(0,i._)((0,o.useState)(!1),2),j=v[0],w=v[1],N=(0,o.useRef)(null),_=(0,o.useRef)(null),b=(0,i._)((0,o.useState)(1),2),y=b[0],S=b[1],k=(0,i._)((0,o.useState)(0),2),C=k[0],I=k[1],P=(0,i._)((0,o.useState)(1),2),M=P[0],B=P[1],E=(0,i._)((0,o.useState)(a.length),2),L=E[0],F=E[1],T=(0,i._)((0,o.useState)(10),2),H=T[0],A=T[1],V=(0,i._)((0,o.useState)(!1),2),Z=V[0],z=V[1],resetInterval=function(e){e<=0||(window.intervalPage&&clearInterval(window.intervalPage),z(!0),window.intervalPage=setInterval(function(){window.currentPage<C-1?generateNext():(z(!1),clearInterval(window.intervalPage),window.intervalPage=0)},1e3*e))},visualizePage=function(e){g(!0);var s=window.bars[e];N.current.innerHTML=s,window.currentPage=e,S(e+1),setTimeout(function(){initSelection(),g(!1),window.startIndex&&window.endIndex&&highlightMeasureBetween(window.startIndex,window.endIndex)},200)},generateNext=function(){window.bars&&window.currentPage<C-1&&visualizePage(window.currentPage+1)},changePage=function(){var e=y;(!e||e<1)&&(e=1),e>=C&&(e=C),S(e),visualizePage(parseInt(e)-1)},renderBarPage=function(e){window.verovioToolkit.setOptions({scale:50,scaleToPageSize:!0,pageWidth:_.current.getBoundingClientRect().width,pageHeight:_.current.getBoundingClientRect().height-40}),window.verovioToolkit.loadData(e);var s=window.verovioToolkit.getPageCount();I(s),window.currentPage=0,window.bars=[];for(var n=0;n<s;n++)if(0==n){var a=window.verovioToolkit.renderToSVG(n+1);window.bars.push(a)}else!function(e){setTimeout(function(){var s=window.verovioToolkit.renderToSVG(e+1);window.bars.push(s)},300*e)}(n)},buildMeasureMap=function(e){for(var s={},n={},a=0;a<e.length;a++)s[e[a]]=a+1,n[a+1]=e[a];window.measureMap=s,window.measureIndexMap=n},highlightMeasureBetween=function(e,s){if(e>s){var n=e;e=s,s=n}for(var a=e;a<=s;a++){var l=document.getElementById(measureIndexMap[a]);l&&l.classList.add("selected")}B(e),F(s)},normalizeMeasureBetween=function(e,s){if(e>s){var n=e;e=s,s=n}if(e){var a=document.getElementById(window.measureIndexMap[e]);a&&a.classList.remove("annotated-start")}if(s){var l=document.getElementById(window.measureIndexMap[s]);l&&l.classList.remove("annotated-end")}for(var i=e;i<=s;i++){var t=document.getElementById(window.measureIndexMap[i]);t&&t.classList.remove("selected")}},initSelection=function(){document.querySelectorAll(".measure").forEach(function(e){e.addEventListener("click",function(s){if("end"==window.selectState){if(window.startId){var n=document.getElementById(window.startId);n&&n.classList.remove("annotated-start")}window.startIndex&&window.endIndex&&normalizeMeasureBetween(window.startIndex,window.endIndex),window.startId=e.id;var a=window.measureMap[e.id];window.selectState="start",e.classList.add("annotated-start"),window.startIndex=a,window.endIndex=null,window.endId=null}else{if(window.endId){var l=document.getElementById(window.endId);l&&l.classList.remove("annotated-end")}window.endId=e.id;var i=window.measureMap[e.id];window.selectState="end",e.classList.add("annotated-end"),window.endIndex=i,highlightMeasureBetween(window.startIndex,window.endIndex)}})})},initView=function(){s&&(renderBarPage(s),N.current.innerHTML=window.bars[0],w(!0),d&&initSelection())},resetWindowVariables=function(){window.selectState="end",window.startIndex=null,window.endIndex=null,window.startId=null,window.endId=null};return(0,o.useEffect)(function(){f((0,h.G3)())},[]),(0,o.useEffect)(function(){j&&g(!1)},[j]),(0,o.useEffect)(function(){window.measureMap=null,window.measureIndexMap=null,resetWindowVariables(),buildMeasureMap(a),g(!0),window.verovio?(window.verovioToolkit=new window.verovio.toolkit,setTimeout(initView,100)):Promise.all([n.e(752),n.e(714),n.e(817),n.e(565)]).then(n.t.bind(n,393,23)).then(function(e){window.verovio=e;var s=setInterval(function(){try{window.verovioToolkit=new window.verovio.toolkit,clearInterval(s),initView()}catch(e){console.log("Can't init verovio",e)}},50)}),j&&g(!1)},[s]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"loading",style:p?{display:"flex"}:{display:"none"},children:(0,t.jsx)("img",{src:"svg-icons/spinner.svg"})}),(0,t.jsx)("div",{className:"modal fade post-popup music-form "+(l?"show":""),children:(0,t.jsx)("div",{className:"modal-dialog window-popup",role:"document",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsx)("a",{className:"close icon-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:c,children:(0,t.jsx)("svg",{className:"olymp-close-icon",children:(0,t.jsx)("use",{xlinkHref:"#olymp-close-icon"})})}),(0,t.jsxs)("div",{className:"modal-body",children:[d&&(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col col-12 col-sm-12 col col-xl-10 col-lg-10 col-md-10",children:(0,t.jsxs)("div",{className:"row",children:[(0,t.jsxs)("div",{className:"col col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 flex music-start",children:[(0,t.jsxs)("label",{className:"inline-item",children:[(0,h.id)(u,"from_measure"),":"]}),(0,t.jsx)("input",{className:"inline-item",value:M,disabled:!0,onChange:function(){}})]}),(0,t.jsxs)("div",{className:"col col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 flex music-end",children:[(0,t.jsxs)("label",{children:[(0,h.id)(u,"to_measure"),":"]}),(0,t.jsx)("input",{className:"inline-item",value:L,disabled:!0,onChange:function(){}})]})]})}),(0,t.jsxs)("div",{className:"col col-xl-2 col-lg-2 col-md-2 col-sm-12 col-12 flex",style:{justifyContent:"space-between"},children:[(0,t.jsx)("button",{className:"btn btn-primary inline-item",style:{marginBottom:0,width:"48%"},disabled:!d,onClick:function(){d&&(r(M,L),c())},children:(0,h.id)(u,"finish")}),(0,t.jsx)("button",{className:"btn btn-outline-dark inline-item",style:{marginBottom:0,width:"48%"},disabled:!d,onClick:function(){d&&(B(1),F(a.length),normalizeMeasureBetween(window.startIndex,window.endIndex),resetWindowVariables())},children:(0,h.id)(u,"reset")})]})]}),!d&&(0,t.jsxs)("div",{className:"flex",style:{margin:"0 30px"},children:[(0,t.jsx)("div",{className:"inline-item flex",style:{minWidth:"200px",alignItems:"center"},children:(0,t.jsxs)("div",{children:[(0,h.id)(u,"auto_change_page_after_(s)"),":"]})}),(0,t.jsx)("input",{className:"inline-item",value:H,onChange:function(e){A(e.target.value)},type:"number",min:"0",style:{padding:"5px"}}),Z?(0,t.jsxs)("button",{className:"btn btn-outline-dark",style:{marginLeft:"10px",marginBottom:0,width:"100px"},onClick:function(){z(!1),clearInterval(window.intervalPage)},children:[(0,t.jsx)("i",{className:"far fa-stop"}),"\xa0",(0,h.id)(u,"stop")]}):(0,t.jsxs)("button",{className:"btn btn-primary",style:{marginLeft:"10px",marginBottom:0,width:"100px"},onClick:function(){resetInterval(H)},children:[(0,t.jsx)("i",{className:"far fa-play"}),"\xa0",(0,h.id)(u,"start")]})]}),(0,t.jsxs)("div",{className:"bar_container selectable",ref:_,id:"barContainer",children:[(0,t.jsx)("div",{ref:N,id:"barContent"}),(0,t.jsx)("div",{className:"bar-pagination-wrapper "+(p?"hidden":""),children:(0,t.jsxs)("div",{className:"bar-pagination",children:[(0,t.jsx)("button",{className:"btn btn-outline-primary "+(C<=1?"hidden":""),onClick:function(){window.bars&&0!=window.currentPage&&visualizePage(window.currentPage-1)},children:(0,t.jsx)("i",{className:"fa fa-chevron-left"})}),(0,t.jsx)("input",{className:"bar-pagination-item",value:y,type:"number",onChange:function(e){S(e.target.value)},onKeyDown:function(e){"Enter"==e.key&&changePage()}}),(0,t.jsx)("div",{className:"bar-pagination-slash",children:(0,t.jsx)("div",{children:"/"})}),(0,t.jsx)("div",{className:"bar-pagination-item",children:(0,t.jsx)("div",{children:C})}),(0,t.jsx)("button",{className:"btn btn-outline-primary "+(C<=1?"hidden":""),onClick:generateNext,children:(0,t.jsx)("i",{className:"fa fa-chevron-right"})})]})})]})]})]})})})]})}function CreateAssignmentPopup(e){var s=e.isShow,n=e.closePopup,c=e.classId,x=e.assignment,p=e.callback,v=(0,i._)((0,o.useState)("en"),2),j=v[0],w=v[1],N=(0,i._)((0,o.useState)({}),2),_=N[0],b=N[1],y=(0,i._)((0,o.useState)(!1),2),S=y[0],k=y[1],C=(0,i._)((0,o.useState)(!1),2),I=C[0],P=C[1],M=(0,i._)((0,o.useState)(!1),2),B=M[0],E=M[1],L=(0,i._)((0,o.useState)({name:"",description:"",class_id:c,song_id:"",part_id:"",status:"1",created_user_id:"",due_date:"",students:"all"}),2),F=L[0],T=L[1],H=(0,i._)((0,o.useState)(""),2),A=H[0],V=H[1],Z=(0,i._)((0,o.useState)(0),2),z=Z[0],D=Z[1],G=(0,i._)((0,o.useState)(0),2),U=G[0],R=G[1],W=(0,i._)((0,o.useState)([]),2),Y=W[0],K=W[1],O=(0,i._)((0,o.useState)(null),2),q=O[0],J=O[1],X=(0,i._)((0,o.useState)(null),2),Q=X[0],$=X[1],ee=(0,i._)((0,o.useState)(null),2),es=ee[0],en=ee[1],ea=(0,i._)((0,o.useState)({from:"",to:""}),2),el=ea[0],ei=ea[1],initDom=function(){d()(".form-control").on("focus",function(e){d()(d()(e.target).parent()).toggleClass("is-focused")}),d()(".form-control").on("blur",function(e){d()(d()(e.target).parent()).toggleClass("is-focused")})};return(0,o.useEffect)(function(){w((0,h.G3)()),initDom(),b((0,h.PR)())},[]),(0,o.useEffect)(function(){x&&(T({name:x.name,description:x.description,class_id:x.class_id,song_id:x.song_id,part_id:x.part_id,status:x.status,created_user_id:x.created_user_id,due_date:x.due_date,students:""}),x.part_id?(D("1"),(0,f.CE)(x.part_id,function(e){$(e.data),V(e.song.name),en(e.measures),ei({from:e.start,to:e.end})})):(D("0"),(0,f.kd)(x.song_id,function(e){$(e.data),V(e.song.name),en(e.measures)})))},[x]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"modal fade post-popup assignment-form "+(s?"show":""),children:(0,t.jsx)("div",{className:"modal-dialog window-popup",role:"document",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsx)("a",{className:"close icon-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:function(){T({name:"",description:"",class_id:c,song_id:"",part_id:"",status:"1",created_user_id:_.uid,due_date:"",students:"all"}),V(""),D("0"),R("0"),ei({from:null,to:null}),$(null),J(null),en(null),n()},children:(0,t.jsx)("svg",{className:"olymp-close-icon",children:(0,t.jsx)("use",{xlinkHref:"#olymp-close-icon"})})}),(0,t.jsx)("div",{className:"modal-header",children:(0,t.jsx)("h6",{className:"title",children:x?"Assignment Information":(0,h.id)(j,"assignment_creation_form")})}),(0,t.jsx)("div",{className:"modal-body",children:(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:(0,t.jsxs)("div",{className:"form-group label-floating "+(F.name?"":"is-empty "),children:[(0,t.jsx)("label",{className:"control-label",children:(0,h.id)(j,"title")}),(0,t.jsx)("input",{className:"form-control",type:"text",placeholder:"",value:F.name,onChange:function(e){T((0,l._)((0,a._)({},F),{name:e.target.value}))},disabled:!c}),(0,t.jsx)("span",{className:"material-input"})]})}),(0,t.jsx)("div",{className:"col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:(0,t.jsxs)("div",{className:"form-group label-floating "+(F.name?"":"is-empty "),children:[(0,t.jsx)("label",{className:"control-label",children:(0,h.id)(j,"description")}),(0,t.jsx)("textarea",{className:"full-width class-description",type:"text",placeholder:"",value:F.description,onChange:function(e){T((0,l._)((0,a._)({},F),{description:e.target.value}))},disabled:!c}),(0,t.jsx)("span",{className:"material-input"})]})}),(0,t.jsx)("div",{className:"col col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12",children:(0,t.jsx)("fieldset",{className:"form-group",children:(0,t.jsxs)("select",{className:"form-select",value:F.status,onChange:function(e){T((0,l._)((0,a._)({},F),{status:e.target.value}))},disabled:!c,children:[(0,t.jsxs)("option",{value:"1",children:[(0,h.id)(j,"status"),": ",(0,h.id)(j,"open")]}),(0,t.jsxs)("option",{value:"0",children:[(0,h.id)(j,"status"),": ",(0,h.id)(j,"close")]})]})})}),(0,t.jsx)("div",{className:"col col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12",children:(0,t.jsx)("div",{className:"form-group date-time-picker label-floating",children:(0,t.jsx)(r._,{dateAdapter:m.y,children:(0,t.jsx)(u.x,{label:(0,h.id)(j,"due_date"),value:g()(F.due_date),onChange:function(e){e&&T((0,l._)((0,a._)({},F),{due_date:e.format("YYYY-MM-DD HH:mm:ss")}))},disabled:!c})})})}),(0,t.jsx)("div",{className:"col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:(0,t.jsxs)("div",{className:"form-group label-floating flex "+(A?"":"is-empty "),children:[(0,t.jsx)("label",{className:"control-label",children:(0,h.id)(j,"song_name")}),(0,t.jsx)("input",{className:"form-control inline-item",type:"text",value:A,onChange:function(){},onClick:function(){k(!0)},disabled:!c,style:{width:"1"==z?"90%":"100%"}}),"1"==z&&(0,t.jsx)("button",{className:"btn btn-primary inline-item",style:{width:"10%",marginLeft:"10px",marginBottom:0,fontSize:"16px"},onClick:function(){E(!0)},children:(0,t.jsx)("i",{className:"far fa-file-music"})}),(0,t.jsx)("span",{className:"material-input"})]})}),(0,t.jsx)("div",{className:"col"+("0"==z?"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12":"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-6"),children:(0,t.jsx)("fieldset",{className:"form-group",children:(0,t.jsxs)("select",{className:"form-select",value:z,onChange:function(e){D(e.target.value),"1"==e.target.value&&Q&&es&&E(!0)},disabled:!c,children:[(0,t.jsx)("option",{value:"0",children:(0,h.id)(j,"play_the_whole_song")}),(0,t.jsx)("option",{value:"1",children:(0,h.id)(j,"play_the_part_of_the_song")})]})})}),"1"==z?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"col col-xl-3 col-lg-3 col-md-3 col-sm-6 col-3",children:(0,t.jsxs)("div",{className:"form-group label-floating "+(el.from?"":"is-empty "),children:[(0,t.jsxs)("label",{className:"control-label",children:[(0,h.id)(j,"from_measure")," "]}),(0,t.jsx)("input",{className:"form-control",type:"text",disabled:!0,value:el.from}),(0,t.jsx)("span",{className:"material-input"})]})}),(0,t.jsx)("div",{className:"col col-xl-3 col-lg-3 col-md-3 col-sm-6 col-3",children:(0,t.jsxs)("div",{className:"form-group label-floating "+(el.to?"":"is-empty "),children:[(0,t.jsxs)("label",{className:"control-label",children:[(0,h.id)(j,"to_measure")," "]}),(0,t.jsx)("input",{className:"form-control",type:"text",disabled:!0,value:el.to}),(0,t.jsx)("span",{className:"material-input"})]})})]}):(0,t.jsx)(t.Fragment,{}),c&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"col "+("0"==U?"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12":"col-xl-10 col-lg-10 col-md-9 col-sm-8 col-8"),children:(0,t.jsx)("fieldset",{className:"form-group",children:(0,t.jsxs)("select",{className:"form-select",value:U,onChange:function(e){R(e.target.value),"1"==e.target.value&&P(!0)},children:[(0,t.jsx)("option",{value:"0",children:(0,h.id)(j,"assign_to_all_students")}),(0,t.jsx)("option",{value:"1",children:(0,h.id)(j,"assign_to_selected_students")})]})})}),"1"==U&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"col-xl-2 col-lg-2 col-md-3 col-sm-4 col-4 btn-student-select",children:(0,t.jsxs)("button",{className:"btn btn-outline-dark ",onClick:function(){P(!0)},children:[(0,t.jsx)("i",{className:"far fa-user-plus"}),"\xa0(",Y.length," ",(0,t.jsx)("i",{className:"fas fa-user"}),")"]})}),(0,t.jsx)("div",{className:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:(0,t.jsx)("div",{className:"student-box"})})]}),!x&&(0,t.jsx)("div",{className:"col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:(0,t.jsx)("button",{className:"btn btn-blue btn-md full-width",onClick:function(){var e=(0,a._)({},F);delete e.part_id,e.created_user_id=_.uid,"0"==U&&(e.students="all"),"1"==z&&(e.file_id=q,e.from=el.from,e.to=el.to),(0,f.vK)(e,function(e){e.message&&p()})},children:(0,h.id)(j,"create")})})]})]})})]})})}),(0,t.jsx)("div",{className:"modal-backdrop fade "+(s?"show":"")}),c&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(SearchSongPopup,{isShow:S,closePopup:function(){k(!1)},callback:function(e){V(e.name),T((0,l._)((0,a._)({},F),{song_id:e.sid})),(0,f.kd)(e.sid,function(e){$(e.data),J(e.fid),V(e.song.name),en(e.measures)})}}),(0,t.jsx)(StudentSelectionPopup,{isShow:I,closePopup:function(){P(!1)},classId:c,callback:function(e){K(e),T((0,l._)((0,a._)({},F),{students:JSON.stringify(e)}))}})]}),Q&&es&&B&&(0,t.jsx)(ViewMusic,{isShow:B,closePopup:function(){E(!1)},data:Q,measures:es,type:c?"teacher":"student",editable:null==x,onFinish:function(e,s){ei({from:e,to:s})}})]})}},9314:function(e,s,n){n.d(s,{Z:function(){return CreatePerformancePopup}});var a=n(2253),l=n(4932),i=n(1309),t=n(5893),o=n(7294),c=n(7066),d=n(7904),r=n(8878);function CreatePerformancePopup(e){var s=e.assignment,n=e.isShow,m=e.closePopup,u=(0,i._)((0,o.useState)("en"),2),f=u[0],h=u[1],x=(0,i._)((0,o.useState)({}),2),p=x[0],g=x[1],v=(0,o.useRef)(),j=(0,i._)((0,o.useState)(null),2),w=j[0],N=j[1],_=(0,i._)((0,o.useState)({name:"",short_name:""}),2),b=_[0],y=_[1],S=(0,i._)((0,o.useState)({user_id:null,file_id:null,song_id:s.song_id,part_id:s.part_id,assignment_id:s.aid,access_control:1}),2),k=S[0],C=S[1],processBeforeUpload=function(e){var s=localStorage.getItem("backend_url"),n=new FormData;n.append("file",w),c.Z.post(s+"/api/upload_midi",n).then(function(s){var n=s.data;n.file_id?e(n.file_id):n.error?alert(n.error):alert((0,d.id)(f,"error_upload_file"))})};return(0,o.useEffect)(function(){h((0,d.G3)()),g((0,d.PR)())},[]),(0,t.jsx)("div",{className:"modal fade performance-submit-modal "+(n?"show":""),children:(0,t.jsx)("div",{className:"modal-dialog window-popup",role:"document",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsx)("a",{className:"close icon-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:m,children:(0,t.jsx)("svg",{className:"olymp-close-icon",children:(0,t.jsx)("use",{xlinkHref:"#olymp-close-icon"})})}),(0,t.jsx)("div",{className:"modal-header",children:(0,t.jsx)("h6",{className:"title",children:(0,d.id)(f,"upload_your_performance")})}),(0,t.jsx)("div",{className:"modal-body",children:(0,t.jsxs)("form",{className:"performance-form",onSubmit:function(e){e.preventDefault()},children:[(0,t.jsx)("div",{className:"performance-form-content "+(b.name?"show":""),children:(0,t.jsxs)("div",{className:"form-group upload-result",children:[(0,t.jsxs)("div",{className:"upload-result-text",children:["- ",(0,d.id)(f,"your_selected_file_is")," ",(0,t.jsxs)("b",{children:['"',b.name,'"']})]}),(0,t.jsx)("a",{className:"inline-items",onClick:function(){v.current.value="",y((0,l._)((0,a._)({},b),{name:"",short_name:""})),C((0,l._)((0,a._)({},k),{file_id:null})),N(null)},children:(0,t.jsx)("svg",{className:"olymp-status-icon",children:(0,t.jsx)("use",{xlinkHref:"#olymp-close-icon"})})})]})}),(0,t.jsxs)("div",{className:"add-options-message add-options-message_both",children:[(0,t.jsxs)("div",{className:"file-upload transparent-file-upload",children:[(0,t.jsxs)("div",{className:"file-upload__label",onClick:function(){v.current.click()},children:[(0,t.jsx)("div",{className:"file-upload_label_logo",children:(0,t.jsx)("svg",{className:"olymp-status-icon",children:(0,t.jsx)("use",{xlinkHref:"#olymp-music-sound-icon"})})}),(0,t.jsx)("div",{className:"file-upload_label_text",children:(0,d.id)(f,"select_midi/audio")})]}),(0,t.jsx)("input",{type:"file",className:"file-upload__input",ref:v,onChange:function(e){var s=e.target.files[0];if(!s.name.includes(".mid")&&!s.name.includes(".mp3")&&!s.name.includes(".wav")&&!s.name.includes(".midi")){alert((0,d.id)(f,file_acceptance_notice));return}y({name:s.name,short_name:s.name}),N(s)},accept:".mid, .midi, .mp3, .wav"})]}),(0,t.jsx)("button",{className:"btn btn-primary btn-md-2",onClick:function(){processBeforeUpload(function(e){var s=(0,a._)({},k);s.file_id=e,s.user_id=p.uid,(0,r.o7)(s,function(e){e.message&&(alert("Upload successfully!"),m())})})},children:(0,d.id)(f,"post_performance")})]})]})})]})})})}},2447:function(e,s,n){n.d(s,{Z:function(){return ListStudentAssignment}});var a=n(5766),l=n(2253),i=n(4932),t=n(1309),o=n(5893),c=n(7294),d=n(1163),r=n.n(d),m=n(8878),u=n(7324),f=n(9314),h=n(517),x=n(7904);function ListStudentAssignment(e){var s=e.classId,n=e.createdUserId,d=e.user,p=e.type,g=(0,t._)((0,c.useState)("en"),2),v=g[0],j=g[1],w=(0,t._)((0,c.useState)(25),2),N=w[0];w[1];var _=(0,t._)((0,c.useState)([]),2),b=_[0],y=_[1],S=(0,t._)((0,c.useState)(1),2),k=S[0],C=S[1],I=(0,t._)((0,c.useState)(!1),2),P=I[0],M=I[1],B=(0,t._)((0,c.useState)(!1),2),E=B[0],L=B[1],F=(0,t._)((0,c.useState)(null),2),T=F[0],H=F[1],A=(0,t._)((0,c.useState)({}),2),V=A[0],Z=A[1],filter=function(e){(0,m.rH)(s,n,d.user_id,N,e,function(s){C(e);for(var n=0;n<s.length;n++)s[n].submissions.length?V[s[n].aid]=s[n].submissions[0].pid:V[s[n].aid]=null;y(s)})},selectVersion=function(e,s){Z(function(n){return(0,i._)((0,l._)({},n),(0,a._)({},e.aid,s.target.value))})},viewAssignmentInfo=function(e){H(e),L(!0)},viewPerformance=function(e){r().push("/annotation?pid="+V[e.aid])},submitPerformance=function(e){M(!0),H(e)},remove=function(e){(0,m.CT)(e,function(s){s.message&&y(b.filter(function(s){return s.aid!=e}))})};return(0,c.useEffect)(function(){j((0,x.G3)()),filter(1)},[]),(0,o.jsxs)("div",{className:"row",children:[(0,o.jsxs)("div",{className:"col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:["teacher"!=p&&(0,o.jsx)("div",{className:"submenu",children:(0,o.jsx)("h3",{className:"submenu-title",children:(0,x.id)(v,"your_assignment")})}),b&&0!=b.length&&(0,o.jsxs)("div",{className:"table",children:[(0,o.jsxs)("div",{className:"table-row table-header",children:[(0,o.jsx)("div",{className:"table-cell",children:(0,x.id)(v,"title")}),(0,o.jsx)("div",{className:"table-cell description",children:(0,x.id)(v,"description")}),(0,o.jsx)("div",{className:"table-cell",children:(0,x.id)(v,"due_date")}),(0,o.jsx)("div",{className:"table-cell",children:(0,x.id)(v,"assigned_at")}),(0,o.jsx)("div",{className:"table-cell",children:(0,x.id)(v,"submissions")}),(0,o.jsx)("div",{className:"table-cell action"})]}),b&&b.map(function(e,s){return(0,o.jsxs)("div",{className:"table-row",children:[(0,o.jsx)("div",{className:"table-cell",children:e.name}),(0,o.jsx)("div",{className:"table-cell description",children:e.description}),(0,o.jsx)("div",{className:"table-cell",children:e.due_date}),(0,o.jsx)("div",{className:"table-cell",children:e.assigned_at}),(0,o.jsx)("div",{className:"table-cell version",children:e.submissions.length?(0,o.jsx)("fieldset",{className:"form-group",children:(0,o.jsx)("select",{className:"form-select",onChange:function(s){selectVersion(e,s)},children:e.submissions.map(function(e,s){return(0,o.jsx)("option",{value:e.pid,children:e.updated_at},e.pid)})})}):(0,o.jsx)("span",{children:"No submissions"})}),(0,o.jsxs)("div",{className:"table-cell action",children:[(0,o.jsx)("button",{className:"btn btn-outline-dark",onClick:function(){viewAssignmentInfo(e)},children:(0,o.jsx)("i",{className:"far fa-eye"})}),(0,o.jsx)("button",{className:"btn btn-outline-dark",onClick:function(){viewPerformance(e)},disabled:0==e.submissions.length,children:(0,o.jsx)("i",{className:"far fa-user-music"})}),(0,o.jsx)("button",{className:"btn btn-outline-dark",onClick:function(){submitPerformance(e)},children:(0,o.jsx)("i",{className:"far fa-upload"})}),"teacher"==p&&(0,o.jsx)("button",{className:"btn btn-outline-dark",onClick:function(){remove(e.aid)},children:(0,o.jsx)("i",{className:"far fa-trash"})}),""==p]})]},e.aid)})]}),(!b||!b.length)&&(0,o.jsx)("div",{className:"performance-item ui-block",children:(0,o.jsx)("div",{className:"birthday-item inline-items no-content",children:(0,o.jsxs)("h4",{children:[(0,x.id)(v,"no_assignments_for")," ",d.fullname]})})})]}),b&&0!=b.length&&(0,o.jsx)(u.Z,{currentPage:k,onNext:function(){b.length&&!(b.length<N)&&filter(k+1)},onPrev:function(){var e=k-1;e>0&&filter(e)}}),T&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.Z,{assignment:T,isShow:P,closePopup:function(){M(!1),H(null),filter(k)}}),(0,o.jsx)(h.Z,{assignment:T,isShow:E,classId:s,closePopup:function(){L(!1),H(null)}})]})]})}},9730:function(e,s,n){n.d(s,{Z:function(){return ListStudents}});var a=n(1309),l=n(4586),i=n(5893),t=n(7294),o=n(1664),c=n.n(o),d=n(7324),r=n(2447),m=n(7904);function StudentAssignmentPopup(e){var s=e.classId,n=e.createdUserId,l=e.user,o=e.isShow,c=e.closePopup,d=e.type,u=(0,a._)((0,t.useState)("en"),2),f=u[0],h=u[1];return(0,t.useEffect)(function(){h((0,m.G3)())},[]),(0,i.jsx)("div",{className:"modal fade student-assignment-modal "+(o?"show":""),children:(0,i.jsx)("div",{className:"modal-dialog window-popup",role:"document",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsx)("div",{className:"modal-header",children:(0,i.jsxs)("h6",{className:"title",children:[(0,m.id)(f,"assignments_for")," ",l.fullname]})}),(0,i.jsx)("a",{className:"close icon-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:c,children:(0,i.jsx)("svg",{className:"olymp-close-icon",children:(0,i.jsx)("use",{xlinkHref:"#olymp-close-icon"})})}),(0,i.jsx)("div",{className:"modal-body",children:(0,i.jsx)(r.Z,{classId:s,createdUserId:n,user:l,type:d})})]})})})}var u=n(8878),f=n(2341);function ListStudents(e){var s=e.classId,n=e.createdUserId,o=e.invite,r=e.type,h=e.onFinish,x=(0,a._)((0,t.useState)("en"),2),p=x[0],g=x[1],v=(0,a._)((0,t.useState)(25),2),j=v[0];v[1];var w=(0,a._)((0,t.useState)([]),2),N=w[0],_=w[1],b=(0,a._)((0,t.useState)(1),2),y=b[0],S=b[1],k=(0,a._)((0,t.useState)(null),2),C=k[0],I=k[1],P=(0,a._)((0,t.useState)(!1),2),M=P[0],B=P[1],filter=function(e){(0,u.vX)(s,j,e,function(s){S(e);for(var n=0;n<s.length;n++)s[n].checked=!1;_(s)})},remove=function(e){(0,u.en)(s,e,function(s){s.message&&_(N.filter(function(s){return s.user_id!=e}))})},viewStudentAssignment=function(e){I(e),B(!0)},handleCheckboxChange=function(e,s){var n=s.target,a=(n.name,n.checked),i=(0,l._)(N);i[e].checked=a,_(i)};return(0,t.useEffect)(function(){g((0,m.G3)()),filter(1)},[]),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12",children:[(0,i.jsx)("div",{className:"submenu",children:(0,i.jsx)("h3",{className:"submenu-title",children:f.S[p].student_management})}),N.map(function(e,s){return(0,i.jsxs)("div",{className:"performance-item ui-block row-flex",children:[(0,i.jsxs)("div",{className:"birthday-item inline-items item-flex",children:[(0,i.jsx)("div",{className:"author-thumb",children:(0,i.jsx)("img",{loading:"lazy",src:e.avatar,alt:"author",width:"38",height:"38"})}),(0,i.jsxs)("div",{className:"author-name",children:[(0,i.jsx)(c(),{className:"h6 author-name",href:"/profile?uid="+e.user_id,children:e.fullname}),(0,i.jsx)("div",{className:"birthday-date",children:e.started_at})]})]}),(0,i.jsx)("div",{className:"performance-item-action item-flex",children:"popup"==r?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("input",{type:"checkbox",className:"checkbox",checked:e.checked,name:"student-box-"+e.user_id,onChange:function(e){handleCheckboxChange(s,e)}})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("button",{className:"btn btn-outline-primary",onClick:function(){viewStudentAssignment(e)},children:[(0,i.jsx)("i",{className:"far fa-tasks"})," ",f.S[p].assignment]}),(0,i.jsxs)("button",{className:"btn btn-outline-dark",onClick:function(){remove(e.user_id,2)},children:[(0,i.jsx)("i",{className:"far fa-trash"})," ",f.S[p].remove]})]})})]},e.class_id+"_"+e.user_id)}),0==N.length?(0,i.jsxs)("div",{className:"performance-item ui-block",children:[(0,i.jsx)("div",{className:"birthday-item inline-items no-content",children:(0,i.jsx)("h4",{children:f.S[p].no_students})}),o&&(0,i.jsx)("div",{className:"flex",style:{justifyContent:"center"},children:(0,i.jsxs)("button",{className:"btn btn-outline-dark",onClick:function(){o()},children:[(0,i.jsx)("i",{className:"far fa-paper-plane"}),"\xa0Invite Students"]})})]}):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)(d.Z,{currentPage:y,onNext:function(){N.length&&!(N.length<j)&&filter(y+1)},onPrev:function(){var e=y-1;e>0&&filter(e)}}),"popup"==r?(0,i.jsx)("button",{className:"btn btn-blue btn-md full-width",onClick:function(){for(var e=[],s=0;s<N.length;s++)N[s].checked&&e.push(N[s].user_id);h(e)},children:f.S[p].finish}):(0,i.jsx)(i.Fragment,{})]}),n&&C&&(0,i.jsx)(StudentAssignmentPopup,{classId:s,createdUserId:n,user:C,closePopup:function(){I(null),B(!1)},isShow:M,type:"teacher"})]})}},7324:function(e,s,n){n.d(s,{Z:function(){return Navigation}});var a=n(5893);function Navigation(e){var s=e.currentPage,n=e.onPrev,l=e.onNext;return(0,a.jsx)("nav",{"aria-label":"Page navigation",children:(0,a.jsxs)("ul",{className:"pagination justify-content-center",children:[(0,a.jsx)("li",{className:"page-item",children:(0,a.jsx)("a",{className:"page-link "+(1==s?"page-link-disabled":""),disabled:1==s,onClick:n,children:(0,a.jsx)("i",{className:"fa fa-chevron-left"})})}),(0,a.jsx)("li",{className:"page-item",children:(0,a.jsx)("a",{className:"page-link page-link-content",disabled:!0,children:s})}),(0,a.jsx)("li",{className:"page-item",children:(0,a.jsx)("a",{className:"page-link",onClick:l,children:(0,a.jsx)("i",{className:"fa fa-chevron-right"})})})]})})}}}]);