(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{8844:function(){},2084:function(e,t,i){"use strict";i.d(t,{YG:function(){return H},ZP:function(){return s},_H:function(){return I}});var n=i(7294);let r={x:0,y:0,width:0,height:0,unit:"px"},v=(e,t,i)=>Math.min(Math.max(e,t),i),S=(...e)=>e.filter(e=>e&&"string"==typeof e).join(" "),Y=(e,t)=>e===t||e.width===t.width&&e.height===t.height&&e.x===t.x&&e.y===t.y&&e.unit===t.unit;function H(e,t,i,n){let r=y(e,i,n);return e.width&&(r.height=r.width/t),e.height&&(r.width=r.height*t),r.y+r.height>n&&(r.height=n-r.y,r.width=r.height*t),r.x+r.width>i&&(r.width=i-r.x,r.height=r.width/t),"%"===e.unit?D(r,i,n):r}function I(e,t,i){let n=y(e,t,i);return n.x=(t-n.width)/2,n.y=(i-n.height)/2,"%"===e.unit?D(n,t,i):n}function D(e,t,i){return"%"===e.unit?{...r,...e,unit:"%"}:{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/i*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/i*100:0}}function y(e,t,i){return e.unit?"px"===e.unit?{...r,...e,unit:"px"}:{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*i/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*i/100:0}:{...r,...e,unit:"px"}}function P(e,t,i,n,r,h=0,o=0,a=n,s=r){let d={...e},l=Math.min(h,n),c=Math.min(o,r),w=Math.min(a,n),g=Math.min(s,r);t&&(t>1?(c=(l=o?o*t:l)/t,w=a*t):(l=(c=h?h/t:c)*t,g=s/t)),d.y<0&&(d.height=Math.max(d.height+d.y,c),d.y=0),d.x<0&&(d.width=Math.max(d.width+d.x,l),d.x=0);let p=n-(d.x+d.width);p<0&&(d.x=Math.min(d.x,n-l),d.width+=p);let m=r-(d.y+d.height);if(m<0&&(d.y=Math.min(d.y,r-c),d.height+=m),d.width<l&&(("sw"===i||"nw"==i)&&(d.x-=l-d.width),d.width=l),d.height<c&&(("nw"===i||"ne"==i)&&(d.y-=c-d.height),d.height=c),d.width>w&&(("sw"===i||"nw"==i)&&(d.x-=w-d.width),d.width=w),d.height>g&&(("nw"===i||"ne"==i)&&(d.y-=g-d.height),d.height=g),t){let e=d.width/d.height;if(e<t){let e=Math.max(d.width/t,c);("nw"===i||"ne"==i)&&(d.y-=e-d.height),d.height=e}else if(e>t){let e=Math.max(d.height*t,l);("sw"===i||"nw"==i)&&(d.x-=e-d.width),d.width=e}}return d}let h={capture:!0,passive:!1},o=0,a=class u extends n.PureComponent{constructor(){super(...arguments),this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},this.componentRef=(0,n.createRef)(),this.mediaRef=(0,n.createRef)(),this.initChangeCalled=!1,this.instanceId=`rc-${o++}`,this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=e=>{let{crop:t,disabled:i}=this.props,n=this.getBox();if(!t)return;let r=y(t,n.width,n.height);if(i)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});let h=e.target.dataset.ord,o=e.clientX,a=e.clientY,s=r.x,d=r.y;if(h){let t=e.clientX-n.x,i=e.clientY-n.y,l=0,c=0;"ne"===h||"e"==h?(l=t-(r.x+r.width),c=i-r.y,s=r.x,d=r.y+r.height):"se"===h||"s"===h?(l=t-(r.x+r.width),c=i-(r.y+r.height),s=r.x,d=r.y):"sw"===h||"w"==h?(l=t-r.x,c=i-(r.y+r.height),s=r.x+r.width,d=r.y):("nw"===h||"n"==h)&&(l=t-r.x,c=i-r.y,s=r.x+r.width,d=r.y+r.height),o=s+n.x+l,a=d+n.y+c}this.evData={startClientX:o,startClientY:a,startCropX:s,startCropY:d,clientX:e.clientX,clientY:e.clientY,isResize:!!h,ord:h},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=e=>{let{crop:t,disabled:i,locked:n,keepSelection:r,onChange:h}=this.props,o=this.getBox();if(i||n||r&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});let a=e.clientX-o.x,s=e.clientY-o.y,d={unit:"px",x:a,y:s,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:a,startCropY:s,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,h(y(d,o.width,o.height),D(d,o.width,o.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=e=>{let t;let{crop:i,disabled:n,onChange:r,onDragStart:h}=this.props,o=this.getBox();if(n||!i||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,h&&h(e));let{evData:a}=this;a.clientX=e.clientX,a.clientY=e.clientY,Y(i,t=a.isResize?this.resizeCrop():this.dragCrop())||r(y(t,o.width,o.height),D(t,o.width,o.height))},this.onComponentKeyDown=e=>{let{crop:t,disabled:i,onChange:n,onComplete:r}=this.props;if(i)return;let h=e.key,o=!1;if(!t)return;let a=this.getBox(),s=this.makePixelCrop(a),d=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?u.nudgeStepLarge:e.shiftKey?u.nudgeStepMedium:u.nudgeStep;if("ArrowLeft"===h?(s.x-=d,o=!0):"ArrowRight"===h?(s.x+=d,o=!0):"ArrowUp"===h?(s.y-=d,o=!0):"ArrowDown"===h&&(s.y+=d,o=!0),o){e.cancelable&&e.preventDefault(),s.x=v(s.x,0,a.width-s.width),s.y=v(s.y,0,a.height-s.height);let t=y(s,a.width,a.height),i=D(s,a.width,a.height);n(t,i),r&&r(t,i)}},this.onHandlerKeyDown=(e,t)=>{let{aspect:i=0,crop:n,disabled:r,minWidth:h=0,minHeight:o=0,maxWidth:a,maxHeight:s,onChange:d,onComplete:l}=this.props,c=this.getBox();if(r||!n||"ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"ArrowLeft"!==e.key&&"ArrowRight"!==e.key)return;e.stopPropagation(),e.preventDefault();let w=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?u.nudgeStepLarge:e.shiftKey?u.nudgeStepMedium:u.nudgeStep,g=y(n,c.width,c.height),p=function(e,t,i,n){let r={...e};return"ArrowLeft"===t?"nw"===n?(r.x-=i,r.y-=i,r.width+=i,r.height+=i):"w"===n?(r.x-=i,r.width+=i):"sw"===n?(r.x-=i,r.width+=i,r.height+=i):"ne"===n?(r.y+=i,r.width-=i,r.height-=i):"e"===n?r.width-=i:"se"===n&&(r.width-=i,r.height-=i):"ArrowRight"===t&&("nw"===n?(r.x+=i,r.y+=i,r.width-=i,r.height-=i):"w"===n?(r.x+=i,r.width-=i):"sw"===n?(r.x+=i,r.width-=i,r.height-=i):"ne"===n?(r.y-=i,r.width+=i,r.height+=i):"e"===n?r.width+=i:"se"===n&&(r.width+=i,r.height+=i)),"ArrowUp"===t?"nw"===n?(r.x-=i,r.y-=i,r.width+=i,r.height+=i):"n"===n?(r.y-=i,r.height+=i):"ne"===n?(r.y-=i,r.width+=i,r.height+=i):"sw"===n?(r.x+=i,r.width-=i,r.height-=i):"s"===n?r.height-=i:"se"===n&&(r.width-=i,r.height-=i):"ArrowDown"===t&&("nw"===n?(r.x+=i,r.y+=i,r.width-=i,r.height-=i):"n"===n?(r.y+=i,r.height-=i):"ne"===n?(r.y+=i,r.width-=i,r.height-=i):"sw"===n?(r.x-=i,r.width+=i,r.height+=i):"s"===n?r.height+=i:"se"===n&&(r.width+=i,r.height+=i)),r}(g,e.key,w,t),m=P(p,i,t,c.width,c.height,h,o,a,s);if(!Y(n,m)){let e=D(m,c.width,c.height);d(m,e),l&&l(m,e)}},this.onDocPointerDone=e=>{let{crop:t,disabled:i,onComplete:n,onDragEnd:r}=this.props,h=this.getBox();this.unbindDocMove(),!(i||!t)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,r&&r(e),n&&n(y(t,h.width,h.height),D(t,h.width,h.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},this.onDragFocus=()=>{var e;null==(e=this.componentRef.current)||e.scrollTo(0,0)}}get document(){return document}getBox(){let e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};let{x:t,y:i,width:n,height:r}=e.getBoundingClientRect();return{x:t,y:i,width:n,height:r}}componentDidUpdate(e){let{crop:t,onComplete:i}=this.props;if(i&&!e.crop&&t){let{width:e,height:n}=this.getBox();e&&n&&i(y(t,e,n),D(t,e,n))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,h),this.document.addEventListener("pointerup",this.onDocPointerDone,h),this.document.addEventListener("pointercancel",this.onDocPointerDone,h),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,h),this.document.removeEventListener("pointerup",this.onDocPointerDone,h),this.document.removeEventListener("pointercancel",this.onDocPointerDone,h),this.docMoveBound=!1)}getCropStyle(){let{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){let{evData:e}=this,t=this.getBox(),i=this.makePixelCrop(t),n=e.clientX-e.startClientX,r=e.clientY-e.startClientY;return i.x=v(e.startCropX+n,0,t.width-i.width),i.y=v(e.startCropY+r,0,t.height-i.height),i}getPointRegion(e,t,i,n){let r;let{evData:h}=this,o=h.clientX-e.x,a=h.clientY-e.y;return r=n&&t?"nw"===t||"n"===t||"ne"===t:a<h.startCropY,(i&&t?"nw"===t||"w"===t||"sw"===t:o<h.startCropX)?r?"nw":"sw":r?"ne":"se"}resolveMinDimensions(e,t,i=0,n=0){let r=Math.min(i,e.width),h=Math.min(n,e.height);return t&&(r||h)?t>1?r?[r,r/t]:[h*t,h]:h?[h*t,h]:[r,r/t]:[r,h]}resizeCrop(){let{evData:e}=this,{aspect:t=0,maxWidth:i,maxHeight:n}=this.props,r=this.getBox(),[h,o]=this.resolveMinDimensions(r,t,this.props.minWidth,this.props.minHeight),a=this.makePixelCrop(r),s=this.getPointRegion(r,e.ord,h,o),d=e.ord||s,l=e.clientX-e.startClientX,c=e.clientY-e.startClientY;(h&&"nw"===d||"w"===d||"sw"===d)&&(l=Math.min(l,-h)),(o&&"nw"===d||"n"===d||"ne"===d)&&(c=Math.min(c,-o));let w={unit:"px",x:0,y:0,width:0,height:0};"ne"===s?(w.x=e.startCropX,w.width=l,t?w.height=w.width/t:w.height=Math.abs(c),w.y=e.startCropY-w.height):"se"===s?(w.x=e.startCropX,w.y=e.startCropY,w.width=l,t?w.height=w.width/t:w.height=c):"sw"===s?(w.x=e.startCropX+l,w.y=e.startCropY,w.width=Math.abs(l),t?w.height=w.width/t:w.height=c):"nw"===s&&(w.x=e.startCropX+l,w.width=Math.abs(l),t?(w.height=w.width/t,w.y=e.startCropY-w.height):(w.height=Math.abs(c),w.y=e.startCropY+c));let g=P(w,t,s,r.width,r.height,h,o,i,n);return t||u.xyOrds.indexOf(d)>-1?a=g:u.xOrds.indexOf(d)>-1?(a.x=g.x,a.width=g.width):u.yOrds.indexOf(d)>-1&&(a.y=g.y,a.height=g.height),a.x=v(a.x,0,r.width-a.width),a.y=v(a.y,0,r.height-a.height),a}renderCropSelection(){let{ariaLabels:e=u.defaultProps.ariaLabels,disabled:t,locked:i,renderSelectionAddon:r,ruleOfThirds:h,crop:o}=this.props,a=this.getCropStyle();if(o)return n.createElement("div",{style:a,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":e.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!t&&!i&&n.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},n.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),n.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),n.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),n.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),n.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":e.nwDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"nw"),role:"button"}),n.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":e.nDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"n"),role:"button"}),n.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":e.neDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"ne"),role:"button"}),n.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":e.eDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"e"),role:"button"}),n.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":e.seDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"se"),role:"button"}),n.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":e.sDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"s"),role:"button"}),n.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":e.swDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"sw"),role:"button"}),n.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":e.wDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"w"),role:"button"})),r&&n.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:e=>e.stopPropagation()},r(this.state)),h&&n.createElement(n.Fragment,null,n.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),n.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(e){let t={...r,...this.props.crop||{}};return y(t,e.width,e.height)}render(){let{aspect:e,children:t,circularCrop:i,className:r,crop:h,disabled:o,locked:a,style:s,ruleOfThirds:d}=this.props,{cropIsActive:l,newCropIsBeingDrawn:c}=this.state,w=h?this.renderCropSelection():null,g=S("ReactCrop",r,l&&"ReactCrop--active",o&&"ReactCrop--disabled",a&&"ReactCrop--locked",c&&"ReactCrop--new-crop",h&&e&&"ReactCrop--fixed-aspect",h&&i&&"ReactCrop--circular-crop",h&&d&&"ReactCrop--rule-of-thirds",!this.dragStarted&&h&&!h.width&&!h.height&&"ReactCrop--invisible-crop",i&&"ReactCrop--no-animate");return n.createElement("div",{ref:this.componentRef,className:g,style:s},n.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},t),h?n.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},n.createElement("defs",null,n.createElement("mask",{id:`hole-${this.instanceId}`},n.createElement("rect",{width:"100%",height:"100%",fill:"white"}),i?n.createElement("ellipse",{cx:`${h.x+h.width/2}${h.unit}`,cy:`${h.y+h.height/2}${h.unit}`,rx:`${h.width/2}${h.unit}`,ry:`${h.height/2}${h.unit}`,fill:"black"}):n.createElement("rect",{x:`${h.x}${h.unit}`,y:`${h.y}${h.unit}`,width:`${h.width}${h.unit}`,height:`${h.height}${h.unit}`,fill:"black"}))),n.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,w)}};a.xOrds=["e","w"],a.yOrds=["n","s"],a.xyOrds=["nw","ne","se","sw"],a.nudgeStep=1,a.nudgeStepMedium=10,a.nudgeStepLarge=100,a.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}};let s=a}}]);